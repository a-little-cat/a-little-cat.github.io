---
tag: [C/C++]
description: 记录一个简单的C时间统计函数
---

在C中使用时间统计是常用的操作,记录一版如下:
<!--more-->
```c++
    #include <time.h>
    #include <stdio.h>
    using namespce std;
    
    int main()
    {
        clock_t start,finish;
        double duration;
        start = clock();
        dosomething();
        finish = clock();
        duration = (double)(finish-start) / CLOCKS_PER_SEC;
        printf("%lf seconds \n",duration);
    }

struct timeval tv_start = {.tv_sec = 0, .tv_usec = 0};

int get_ms(void)
{
  struct timeval tv_end;
  int ms;
  gettimeofday(&tv_end, NULL);
  ms = (tv_end.tv_sec - tv_start.tv_sec) * 1000.0 + (tv_end.tv_usec - tv_start.tv_usec) / 1000.0;
  tv_start = tv_end;
  return ms;
}
```

